<html>
<body>
<style type="text/css">
	body,html{
	width:100%;
	height: 100%;
	margin:0;
	padding:0;
	overflow:hidden;
	}
	canvas{
	position:absolute;

	}
</style>

<script src="processing.js"></script>
<script type="text/processing" data-processing-target="mycanvas">
void setup(){
	

	size(window.innerWidth,window.innerHeight);

	frameRate(60);
	background(20, 20, 20);

}


  


public var explarray = [];
var explosion = function(startX,startY,colorInt,amount,bonus,rocket,maxLife){
    
    this.x = startX;
    this.y = startY;
    if (rocket){
    startY = window.innerHeight;
    }

    
    var bullarray = [];
    
    fill(255, 191, 0);
    
    this.bullet = function(xpos,ypos,roundedInt,lifem,lifep,mitboom){
      this.x = xpos;
      this.y = ypos;
      this.xdir = 0;
      this.ydir = 0;
      this.life  = random(lifem,lifep);
      this.precolor = [
      [random(200,230),random(100,150),random(0,80)]
      ,[random(100,150),random(200,220),random(50,80)]
      ,[random(200,230),random(100,150),random(0,200)]
      ,[0+random(-30,30),100+random(-30,30),50+random(-30,30)]
      ,[100+random(-30,30),30+random(-30,30),130+random(-30,30)]
      ,[50+random(-30,30),160+random(-30,30),30+random(-30,30)]
      ,[255+random(-30,30),255+random(-30,30),255+random(-30,30)]
      ];
      this.size = ceil(random(10,35));
      this.color = this.precolor[roundedInt];
      this.exploded = !mitboom;
      this.mitBonus = !mitboom;
    };
    
    
    for (var  i = 0; i<amount;i++){
        bullarray[i] = new this.bullet(startX,startY,colorInt,20,maxLife,bonus);
       if (!bonus){
        bullarray[i].xdir = random(-1,1)*10;
        bullarray[i].ydir = random(-1,1)*10;
        }
      else{
        bullarray[i].xdir = random(-0.5,0.5)*10;
        bullarray[i].ydir = random(-0.3,-1.2)*10;
      }
    }
    this.life = 0;
    
    this.draw = function() {
       
        for (var i = 0; i<amount;i++){
        if(bullarray[i].life+5>=0){
          if (((bullarray[i].life>=0)&&(!(bullarray[i].exploded))||bullarray[i].mitBonus)){      
         fill(bullarray[i].color[0],bullarray[i].color[1],bullarray[i].color[2]);
         stroke(bullarray[i].color[0]+10,bullarray[i].color[1]+10,bullarray[i].color[2]+10);
         ellipse(bullarray[i].x,bullarray[i].y,bullarray[i].size,bullarray[i].size);  
         bullarray[i].x+=bullarray[i].xdir;
         bullarray[i].y+=bullarray[i].ydir;
         bullarray[i].size-=(bullarray[i].size/100);
         bullarray[i].life--;

        }
        else if (!bullarray[i].exploded){
        append(explarray,new explosion(bullarray[i].x,bullarray[i].y,round(random(0,5)),100,false,false,50));
        bullarray[i].exploded = true;

        }
       }
       }

        
    };
    

};
background(0, 0, 0);

void draw() {
 fill(10, 10, 10,20);
 rect(-5,-5,10000,10000);  
 for (var i = 0; i<explarray.length;i++){
  explarray[i].draw();   
 }
 translate(width/2,height/2);
 scale(0.2);

};



void mousePressed(){
    append(explarray,new explosion(mouseX,mouseY,6,2,true,true,200));
};



</script>
<canvas id="mycanvas"></canvas>
</body>
</html>